package sample;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.Event;
import javafx.scene.control.ComboBox;
import javafx.scene.control.ListView;

import java.util.*;

/*
 * the controller handles the events generated by the GUI- anything the GUI needs to do should happen in here.
 * Also, any time the model changes, information will need to be updated to the GUI- the controller handles that too
 * It's the layer handling all communication between the model and the GUI.
 *

 */
public class Controller implements Observer {
    static Model model;
    ListView focus;
    public void setModel(Model m){
        model = m;
    }
    ArrayList<String> categoryList;
    ComboBox category, food, gender, activity, trackNutrient1, trackNutrient2, trackNutrient3, trackNutrient4,
        trackNutrient5;


    static void prepComboBox(ComboBox c, List<String> strings) {//Sets a combobox to contain the labels
        ObservableList<String> list = FXCollections.observableList(strings);
        c.setItems(list);
        c.setValue(list.get(0));
    }

    public void initComboBoxes(){
       Hashtable<String, ArrayList<String>> categories= model.getCategoryToItemsList();
        category = (ComboBox) Main.root.lookup("#categoryCombo");
        food = (ComboBox)Main.root.lookup("#foodCombo");
        gender= (ComboBox)Main.root.lookup("#genderCombo");
        activity= (ComboBox)Main.root.lookup("#activityCombo");
        trackNutrient1= (ComboBox)Main.root.lookup("#trackNutrient1");
        trackNutrient2= (ComboBox)Main.root.lookup("#trackNutrient2");
        trackNutrient3= (ComboBox)Main.root.lookup("#trackNutrient3");
        trackNutrient4= (ComboBox)Main.root.lookup("#trackNutrient4");
        trackNutrient5= (ComboBox)Main.root.lookup("#trackNutrient5");
        categoryList = new ArrayList<String>();
        for(String x : categories.keySet())categoryList.add(x);
        prepComboBox(category, categoryList);
        prepComboBox(food, categories.get(categoryList.get(0)));
        List<String>tempList = new ArrayList();
        tempList.add("Male");
        tempList.add("Female");
        prepComboBox(gender, tempList);
        tempList.clear();
        for(NutrientCalculator.ExerciseLevel x : NutrientCalculator.allLevels){
            tempList.add(x.toString());
        }
        prepComboBox(activity, tempList);
        tempList.clear();
        prepComboBox(trackNutrient1, model.getNutrients());
        prepComboBox(trackNutrient2, model.getNutrients());
        prepComboBox(trackNutrient3, model.getNutrients());
        prepComboBox(trackNutrient4, model.getNutrients());
        prepComboBox(trackNutrient5, model.getNutrients());
        trackNutrient2.setValue(model.getNutrients().get(1));
        trackNutrient3.setValue(model.getNutrients().get(2));
        trackNutrient4.setValue(model.getNutrients().get(3));
        trackNutrient5.setValue(model.getNutrients().get(4));

    }

    public void makeBreakfastFocus(Event event) {//This is a change
        System.err.println("Breakfast is focus (really)");
        focus = (ListView) Main.root.lookup("#BreakfastView");
        String SelectedItem = "Temp";
        model.addSelectedItem(SelectedItem);
    }

    public void makeLunchFocus(Event event) {
        System.err.println("Lunch is focus (not really)");

    }

    public void makeDinnerFocus(Event e) {
        System.err.println("Dinner is focus (not really)");

    }



    public void addToDinner(ActionEvent actionEvent) {
        System.err.println("Dinner Stuff");
    }

    public void addToLunch(ActionEvent actionEvent) {
        System.err.println("Lunch Stuff");
    }

    public void addToBreakfast(ActionEvent actionEvent) {//Official change by Anthony
        System.err.println("BreakfastStuff");
    }

    public void printLabels(ActionEvent actionEvent) {//Now Sofy added this change
        System.err.println("Print Stuff");
    }

    public void removeAllItems(ActionEvent actionEvent) {//This is another change
    }


    public void removeFocusedItem(ActionEvent actionEvent) {
    }

    @Override
    ///This is the method that updates the
    public void update(Observable o, Object arg) {

    }

    public void runAlgorithm(ActionEvent actionEvent) {

    }

    public void calculateStuff(ActionEvent actionEvent) {
        model.updateNutrientCalcBasedonPersonalDetails();
        System.err.println("Calculating things on click");
    }
}
